<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Add New Course</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body {
      background: linear-gradient(to right, #e0f7fa, #f8f9fa);
      font-family: 'Segoe UI', sans-serif;
    }

    .form-wrapper {
      max-width: 800px;
      margin: 50px auto;
      padding: 30px;
      background-color: #fff;
      border-radius: 15px;
      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.1);
      animation: fadeIn 0.6s ease-in-out;
    }

    h2 {
      color: #007bff;
      text-align: center;
      margin-bottom: 25px;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(30px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
  </style>
</head>

<body>

  <%- include('Header'); -%>

    <div class="container">
      <div class="form-wrapper">
        <h2>Add New Course</h2>
        <form action="/course/submit-form-course" method="POST" enctype="multipart/form-data">
          <div class="row">
            <!-- Mentor -->
            <div class="mb-3 col-md-6">
              <label class="form-label">Choose Mentor</label>
              <select name="mentor" class="form-control" required>
                <option value="">-- Choose Mentor --</option>
                <% mentors.forEach(function(mentor) { %>
                  <option value="<%= mentor._id %>">
                    <%= mentor.name %> - <%= mentor.designation %>
                  </option>
                  <% }) %>
              </select>
            </div>

            <!-- Title -->
            <div class="mb-3 col-md-6">
              <label class="form-label">Course Title</label>
              <input type="text" name="courseTitle" class="form-control" required>
            </div>

            <!-- Slug -->
            <div class="mb-3 col-md-6">
              <label class="form-label">Course Slug (URL)</label>
              <input type="text" name="courseSlug" class="form-control" placeholder="e.g., full-stack-development"
                required>
              <small class="text-muted">This will be used in the course URL (only letters, numbers, dashes).</small>
            </div>

            <!-- Brochure -->
            <div class="mb-3 col-md-6">
              <label class="form-label">Brochure URL</label>
              <input type="text" name="courseBrochure" class="form-control">
            </div>

            <!-- Video & Image -->
            <div class="mb-3 col-md-6">
              <label class="form-label">Demo Video URL</label>
              <input type="text" name="courseDemoVideo" class="form-control">
            </div>
            <div class="mb-3 col-md-6">
              <label class="form-label">Course Image</label>
              <input type="file" name="courseImage" class="form-control" accept="image/*">
            </div>

            <!-- Course Banner Image -->
            <div class="mb-3 col-md-6">
              <label class="form-label">Course Banner Image</label>
              <input type="file" name="courseBannerImage" class="form-control" accept="image/*">
            </div>

              <!-- Duration -->
            <div class="mb-3 col-md-6">
              <label class="form-label">Course Duration</label>
              <input type="text" name="courseDuration" class="form-control">
            </div>

            <!-- Description -->
            <div class="mb-3 col-md-12">
              <label class="form-label">Course Description</label>
              <textarea name="courseDescription" class="form-control" rows="3"></textarea>
            </div>

            <!-- Overview -->
            <div class="mb-3 col-md-12">
              <label class="form-label">Course Overview</label>
              <textarea name="courseOverview" class="form-control" rows="3"></textarea>
            </div>

          

            <!-- Dynamic Curriculum Section -->
            <div class="mb-3 col-md-12">
              <label class="form-label">Course Curriculum</label>
              <div id="curriculum-container"></div>
              <button type="button" id="add-curriculum-btn" class="btn btn-outline-primary mt-2">
                + Add Curriculum Section
              </button>
            </div>


            <!-- Pricing -->
            <h5 class="mt-4 mb-2 text-primary">Pricing & Discounts</h5>

            <div class="mb-3 col-md-6">
              <label class="form-label">Online Price (₹)</label>
              <input type="number" name="coursePrice[online]" class="form-control" required>
            </div>
            <div class="mb-3 col-md-6">
              <label class="form-label">Offline Price (₹)</label>
              <input type="number" name="coursePrice[offline]" class="form-control" required>
            </div>
            <div class="mb-3 col-md-6">
              <label class="form-label">Online Discount (₹)</label>
              <input type="number" name="courseDiscount[online]" class="form-control" value="0">
            </div>
            <div class="mb-3 col-md-6">
              <label class="form-label">Offline Discount (₹)</label>
              <input type="number" name="courseDiscount[offline]" class="form-control" value="0">
            </div>

            <!-- Category Dropdown -->
            <div class="mb-3 col-md-12">
              <label class="form-label">Course Category</label>
              <select id="categorySelect" name="courseCategory" class="form-control" required>
                <option value="">-- Select Category --</option>
                <option value="SAP Technical">SAP Technical</option>
                <option value="SAP Functional">SAP Functional</option>
                <option value="Data Science">Data Science</option>
                <option value="HR Courses">HR Courses</option>
                <option value="VLSI">VLSI</option>
                <option value="Other">Other</option>
              </select>
              <input type="text" id="customCategory" name="customCategory" class="form-control mt-2"
                placeholder="Enter custom category" style="display: none;">
            </div>


          </div>

          <button type="submit" class="btn btn-primary w-100">Submit Course</button>
        </form>
      </div>
    </div>

    <script>
      const select = document.getElementById('categorySelect');
      const customInput = document.getElementById('customCategory');

      select.addEventListener('change', () => {
        if (select.value === 'Other') {
          customInput.style.display = 'block';
          customInput.value = '';
        } else {
          customInput.style.display = 'none';
          customInput.value = select.value;
        }
      });
    </script>



    <script>
      const curriculumContainer = document.getElementById('curriculum-container');
      const addBtn = document.getElementById('add-curriculum-btn');

      let curriculumIndex = 0;

      function createCurriculumSection(index) {
        const wrapper = document.createElement('div');
        wrapper.classList.add('border', 'p-3', 'rounded', 'mb-3');
        wrapper.innerHTML = `
      <div class="mb-2">
        <label class="form-label">Title</label>
        <input type="text" name="courseCurriculum[${index}][title]" class="form-control" required>
      </div>
      <div class="mb-2">
        <label class="form-label">Details</label>
        <textarea name="courseCurriculum[${index}][details]" class="form-control" rows="3" required></textarea>
      </div>
      <button type="button" class="btn btn-sm btn-danger remove-curriculum-btn">Remove</button>
    `;
        curriculumContainer.appendChild(wrapper);

        // Handle removal
        wrapper.querySelector('.remove-curriculum-btn').addEventListener('click', () => {
          wrapper.remove();
        });
      }

      addBtn.addEventListener('click', () => {
        createCurriculumSection(curriculumIndex++);
      });

      // Optionally, add one by default
      window.addEventListener('DOMContentLoaded', () => {
        createCurriculumSection(curriculumIndex++);
      });
    </script>


</body>

</html>